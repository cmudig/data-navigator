(()=>{"use strict";var e,t,n,i={312:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeElementDefaults=t.GenericLimitedNavigationRules=t.GenericFullNavigationRules=t.defaultKeyBindings=void 0,t.defaultKeyBindings={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Period:"forward",Comma:"backward",Escape:"parent",Enter:"child"},t.GenericFullNavigationRules={down:{keyCode:"ArrowDown",direction:"target"},left:{keyCode:"ArrowLeft",direction:"source"},right:{keyCode:"ArrowRight",direction:"target"},up:{keyCode:"ArrowUp",direction:"source"},backward:{keyCode:"Comma",direction:"source"},child:{keyCode:"Enter",direction:"target"},parent:{keyCode:"Backspace",direction:"source"},forward:{keyCode:"Period",direction:"target"},exit:{keyCode:"Escape",direction:"target"}},t.GenericLimitedNavigationRules={right:{key:"ArrowRight",direction:"target"},left:{key:"ArrowLeft",direction:"source"},down:{key:"ArrowDown",direction:"target"},up:{key:"ArrowUp",direction:"source"},child:{key:"Enter",direction:"target"},parent:{key:"Backspace",direction:"source"},exit:{key:"Escape",direction:"target"},undo:{key:"Period",direction:"target"},legend:{key:"KeyL",direction:"target"}},t.NodeElementDefaults={cssClass:"",dimensions:{x:0,y:0,width:0,height:0,path:""},semantics:{label:"",elementType:"div",role:"image",attributes:void 0},parentSemantics:{label:"",elementType:"figure",role:"figure",attributes:void 0},existingElement:{useForDimensions:!1,dimensions:void 0}}},489:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.input=void 0;var i=n(312);t.input=function(e){var t={},n=i.defaultKeyBindings,r=i.GenericFullNavigationRules;return t.moveTo=function(t){var n=e.structure.nodes[t];if(n)return n},t.move=function(n,i){if(n){var o=e.structure.nodes[n];if(o.edges){var a=null,s=0,d=r[i];if(!d)return;var c=function(){var t=e.structure.edges[o.edges[s]];if(t.navigationRules.forEach((function(e){a||(a=function(e,t){if(e!==i)return null;var r={target:"string"==typeof t.target?t.target:t.target(o,n),source:"string"==typeof t.source?t.source:t.source(o,n)};return r[d.direction]!==n?r[d.direction]:null}(e,t))})),a)return"break"};for(s=0;s<o.edges.length&&"break"!==c();s++);return a?t.moveTo(a):void 0}}},t.enter=function(){return e.entryPoint?t.moveTo(e.entryPoint):void console.error("No entry point was specified in InputOptions, returning undefined")},t.exit=function(){return e.exitPoint?e.exitPoint:void console.error("No exit point was specified in InputOptions, returning undefined")},t.keydownValidator=function(e){var t=n[e.code];if(t)return t},t.focus=function(e){var t=document.getElementById(e);t&&t.focus()},t.setNavigationKeyBindings=function(e){e?(n={},r=e,Object.keys(e).forEach((function(t){var i=e[t];n[i.key]=t}))):(n=i.defaultKeyBindings,r=i.GenericFullNavigationRules)},t.setNavigationKeyBindings(e.navigationRules),t}},992:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.rendering=void 0;var o=n(312);t.rendering=function(e){var t={},n=!1,a={cssClass:o.NodeElementDefaults.cssClass,dimensions:i({},o.NodeElementDefaults.dimensions),semantics:i({},o.NodeElementDefaults.semantics),parentSemantics:i({},o.NodeElementDefaults.parentSemantics),existingElement:i({},o.NodeElementDefaults.existingElement)};return e.defaults&&(a.cssClass=e.defaults.cssClass||a.cssClass,a.dimensions=e.defaults.dimensions?i(i({},a.dimensions),e.defaults.dimensions):a.dimensions,a.semantics=e.defaults.semantics?i(i({},a.semantics),e.defaults.semantics):a.semantics,a.parentSemantics=e.defaults.parentSemantics?i(i({},a.parentSemantics),e.defaults.parentSemantics):a.parentSemantics,a.existingElement=e.defaults.existingElement?i(i({},a.existingElement),e.defaults.existingElement):a.existingElement),t.initialize=function(){if(n)console.error("The renderer wrapper has already been initialized successfully, RenderingOptions.suffixId is: ".concat(e.suffixId,". No further action was taken."));else if(e.root&&document.getElementById(e.root.id)){if(t.root=document.getElementById(e.root.id),t.root.style.position="relative",t.root.classList.add("dn-root"),e.suffixId)return t.wrapper=document.createElement("div"),t.wrapper.id="dn-wrapper-"+e.suffixId,t.wrapper.classList.add("dn-wrapper"),t.wrapper.style.width=e.root&&e.root.width?e.root.width:"100%",e.root&&e.root.height&&(t.wrapper.style.height=e.root.height),e.entryButton&&e.entryButton.include&&(t.entryButton=document.createElement("button"),t.entryButton.id="dn-entry-button-"+e.suffixId,t.entryButton.classList.add("dn-entry-button"),t.entryButton.innerText="Enter navigation area",e.entryButton.callbacks&&e.entryButton.callbacks.click&&t.entryButton.addEventListener("click",e.entryButton.callbacks.click),e.entryButton.callbacks&&e.entryButton.callbacks.focus&&t.entryButton.addEventListener("focus",e.entryButton.callbacks.focus),t.wrapper.appendChild(t.entryButton)),t.root.appendChild(t.wrapper),e.exitElement&&e.exitElement.include&&(t.exitElement=document.createElement("div"),t.exitElement.id="dn-exit-"+e.suffixId,t.exitElement.classList.add("dn-exit-position"),t.exitElement.innerText="End of data structure.",t.exitElement.setAttribute("aria-label","End of data structure."),t.exitElement.setAttribute("role","note"),t.exitElement.setAttribute("tabindex","-1"),t.exitElement.style.display="none",t.exitElement.addEventListener("focus",(function(n){t.exitElement.style.display="block",t.clearStructure(),e.exitElement.callbacks&&e.exitElement.callbacks.focus&&e.exitElement.callbacks.focus(n)})),t.exitElement.addEventListener("blur",(function(n){t.exitElement.style.display="none",e.exitElement.callbacks&&e.exitElement.callbacks.blur&&e.exitElement.callbacks.blur(n)})),t.root.appendChild(t.exitElement)),n=!0,t.root;console.error("No suffix id found: options.suffixId must be specified.")}else console.error("No root element found, cannot build: RenderingOptions.root.id must reference an existing DOM element in order to render children.")},t.render=function(i){var r=i.renderId,o=e.elementData[r];if(o){if(n){var s=!1,d={},c=function(e,t,n){var r=o[e]||a[e],c=n&&s?d[t]:r[t],u=a[e][t];return"function"==typeof r?r(o,i.datum):"function"==typeof c?c(o,i.datum):c||u||(t?void 0:r)};s=c("existingElement","useForDimensions"),d=c("existingElement","dimensions");var u=parseFloat(c("dimensions","width",!0)||0),l=parseFloat(c("dimensions","height",!0)||0),m=parseFloat(c("dimensions","x",!0)||0),f=parseFloat(c("dimensions","y",!0)||0),p=document.createElement(c("parentSemantics","elementType")),g=c("parentSemantics","attributes");"object"==typeof g&&Object.keys(g).forEach((function(e){p.setAttribute(e,g[e])})),p.setAttribute("role",c("parentSemantics","role")),p.id=r,p.classList.add("dn-node"),p.classList.add(c("cssClass")),p.style.width=u+"px",p.style.height=l+"px",p.style.left=m+"px",p.style.top=f+"px",p.setAttribute("tabindex","-1");var y=document.createElement(c("semantics","elementType")),v=c("semantics","attributes");"object"==typeof v&&Object.keys(v).forEach((function(e){p.setAttribute(e,v[e])})),y.setAttribute("role",c("semantics","role")),y.classList.add("dn-node-text"),o.showText&&(y.innerText=o.semantics.label);var b=c("semantics","label");b||console.error("Accessibility error: a label must be supplied to every rendered element using semantics.label."),y.setAttribute("aria-label",b),p.appendChild(y);var h=c("dimensions","path");if(h){var x=u+m+10,E=l+f+10,w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttribute("width",x+""),w.setAttribute("height",E+""),w.setAttribute("viewBox","0 0 ".concat(x," ").concat(E)),w.style.left=-m+"",w.style.top=-f+"",w.classList.add("dn-node-svg"),w.setAttribute("role","presentation"),w.setAttribute("focusable","false");var k=document.createElementNS("http://www.w3.org/2000/svg","path");k.setAttribute("d",h),k.classList.add("dn-node-path"),w.appendChild(k),p.appendChild(w)}return t.wrapper.appendChild(p),p}console.error("render() was called before initialize(), renderer must be initialized first.")}else console.warn("Render data not found with renderId: ".concat(r,". Failed to render."))},t.remove=function(e){var t=document.getElementById(e);t&&t.remove()},t.clearStructure=function(){r([],t.wrapper.children,!0).forEach((function(e){t.entryButton&&t.entryButton===e||t.remove(e.id)}))},t}},4:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.buildNodeStructure=t.buildNodeStructureFromVegaLite=t.structure=void 0;var i=n(312),r=n(5);t.structure=function(e){return"vega-lite"===e.dataType||"vl"===e.dataType||"Vega-Lite"===e.dataType?(0,t.buildNodeStructureFromVegaLite)(e):void console.warn("Apologies, we currently only have structure scaffolding for Vega-Lite, generic scaffolding coming soon!")},t.buildNodeStructureFromVegaLite=function(e){var t=i.GenericLimitedNavigationRules,n={},o={},a={},s=0,d=e.groupInclusionCriteria?e.groupInclusionCriteria:function(){return!0},c=e.itemInclusionCriteria?e.itemInclusionCriteria:function(){return!0},u=e.datumInclusionCriteria?e.datumInclusionCriteria:function(){return!0},l=e.vegaLiteView._renderer._origin,m=e.vegaLiteView._scenegraph.root.items[0].mark.items[0],f=function(e,t){if(e["data-navigator-id"])return e["data-navigator-id"];var n="dn-node-".concat(t,"-").concat(s);return s++,e["data-navigator-id"]=n,n},p=function(t,i,o,s,d){var c=f(t,i),l="render-"+c,m=o||[0,0];n[c]={},n[c].d={},n[c].id=c,n[c].renderId=l,n[c].index=s,n[c].level=i,n[c].parent=d,a[l]={},a[l].renderId=l,a[l].dimensions={},a[l].dimensions.x=t.bounds.x1+m[0],a[l].dimensions.y=t.bounds.y1+m[1],a[l].dimensions.width=t.bounds.x2-t.bounds.x1,a[l].dimensions.height=t.bounds.y2-t.bounds.y1,a[l].cssClass="dn-vega-lite-node",t.datum&&Object.keys(t.datum).forEach((function(r){var o=t.datum[r];u(r,o,t.datum,i,e.vegaLiteSpec)&&(n[c].d[e.keyRenamingHash&&e.keyRenamingHash[r]?e.keyRenamingHash[r]:r]=o)})),a[l].semantics={},a[l].semantics.label=e.nodeDescriber?e.nodeDescriber(n[c].d,t,i):(0,r.describeNode)(n[c].d)},g=0;return m.items.forEach((function(t){if(d(t,g,e.vegaLiteSpec)){p(t,"group",l,g,m);var n=0,i=t.items[0].mark.items[0].items?t.items[0].mark.items[0]:t;i.items.forEach((function(r){c(r,n,t,e.vegaLiteSpec)&&p(r,"item",l,n,i),n++}))}g++})),Object.keys(n).forEach((function(t){n[t].edges=function(t){var i=n[t],r=i.index,a=i.level,s=i.parent,d=[],c=s.items[r-1];if(c){var u=f(c,a);if(n[u]){var l="".concat(u,"-").concat(i.id);d.push(l),o[l]||(o[l]={source:u,target:i.id,navigationRules:["left","right"]})}}var m=s.items[r+1];if(m){var p=f(m,a);if(n[p]){var g="".concat(i.id,"-").concat(p);d.push(g),o[g]||(o[g]={source:i.id,target:p,navigationRules:["left","right"]})}}if("group"===a&&s.items[r].items){var y=(s.items[r].items[0].mark.items[0].items||s.items[r].items)[0],v=f(y,"item");if(n[v]){var b="".concat(i.id,"-").concat(v);d.push(b),o[b]||(o[b]={source:i.id,target:v,navigationRules:["parent","child"]})}}else if("item"===a){var h=f(s,"group");if(n[h]){var x="".concat(h,"-").concat(i.id);d.push(x),o[x]||(o[x]={source:h,target:i.id,navigationRules:["parent","child"]})}}return e.exitFunction&&(d.push("any-exit"),o["any-exit"]||(o["any-exit"]={source:e.getCurrent,target:e.exitFunction,navigationRules:["exit"]})),d.push("any-undo"),o["any-undo"]||(o["any-undo"]={source:e.getCurrent,target:e.getPrevious,navigationRules:["undo"]}),d}(t)})),{nodes:n,edges:o,elementData:a,navigationRules:t}},t.buildNodeStructure=function(e){return{}}},5:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.describeNode=void 0,t.describeNode=function(e,t){var n=Object.keys(e),i="";return n.forEach((function(n){i+="".concat(t.omitKeyNames?"":n+": ").concat(e[n],". ")})),i+=t.semanticLabel||"Data point."}}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return i[e].call(n.exports,n,n.exports,o),n.exports}e=o(4),t=o(489),n=o(992),e.structure,t.input,n.rendering})();