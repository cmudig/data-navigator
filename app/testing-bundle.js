(()=>{"use strict";var e={66(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NodeElementDefaults=t.GenericLimitedNavigationRules=t.GenericFullNavigationPairs=t.GenericFullNavigationDimensions=t.GenericFullNavigationRules=t.TypicallyUnreservedKeyPairs=t.TypicallyUnreservedSoloKeys=t.TypicallyUnreservedKeys=t.defaultKeyBindings=t.SemanticKeys=void 0,t.SemanticKeys={Escape:!0,Enter:!0,Backspace:!0,ArrowLeft:!0,ArrowRight:!0,ArrowUp:!0,ArrowDown:!0},t.defaultKeyBindings={ArrowLeft:"left",ArrowRight:"right",ArrowUp:"up",ArrowDown:"down",Period:"forward",Comma:"backward",Escape:"parent",Enter:"child"},t.TypicallyUnreservedKeys=["KeyW","KeyJ","LeftBracket","RightBracket","Slash","Backslash"],t.TypicallyUnreservedSoloKeys=["KeyW","KeyJ"],t.TypicallyUnreservedKeyPairs=[["LeftBracket","RightBracket"],["Slash","Backslash"]],t.GenericFullNavigationRules={left:{key:"ArrowLeft",direction:"source"},right:{key:"ArrowRight",direction:"target"},up:{key:"ArrowUp",direction:"source"},down:{key:"ArrowDown",direction:"target"},child:{key:"Enter",direction:"target"},parent:{key:"Backspace",direction:"source"},backward:{key:"Comma",direction:"source"},forward:{key:"Period",direction:"target"},previous:{key:"Semicolon",direction:"source"},next:{key:"Quote",direction:"target"},exit:{key:"Escape",direction:"target"},help:{key:"KeyY",direction:"target"},undo:{key:"KeyZ",direction:"target"}},t.GenericFullNavigationDimensions=[["left","right"],["up","down"],["backward","forward"],["previous","next"]],t.GenericFullNavigationPairs={left:["left","right"],right:["left","right"],up:["up","down"],down:["up","down"],backward:["backward","forward"],forward:["backward","forward"],previous:["previous","next"],next:["previous","next"],parent:["parent","child"],child:["parent","child"],exit:["exit","undo"],undo:["undo","undo"]},t.GenericLimitedNavigationRules={right:{key:"ArrowRight",direction:"target"},left:{key:"ArrowLeft",direction:"source"},down:{key:"ArrowDown",direction:"target"},up:{key:"ArrowUp",direction:"source"},child:{key:"Enter",direction:"target"},parent:{key:"Backspace",direction:"source"},exit:{key:"Escape",direction:"target"},undo:{key:"Period",direction:"target"},legend:{key:"KeyL",direction:"target"}},t.NodeElementDefaults={cssClass:"",spatialProperties:{x:0,y:0,width:0,height:0,path:""},semantics:{label:"",elementType:"div",role:"image",attributes:void 0},parentSemantics:{label:"",elementType:"figure",role:"figure",attributes:void 0},existingElement:{useForSpatialProperties:!1,spatialProperties:void 0}}},149(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.buildStructure=t.buildRules=t.buildEdges=t.scaffoldDimensions=t.buildNodes=t.addSimpleDataIDs=t.buildNodeStructureFromVegaLite=void 0;var a=i(66),r=i(864);t.default=function(e){return"vega-lite"===e.dataType||"vl"===e.dataType||"Vega-Lite"===e.dataType?(0,t.buildNodeStructureFromVegaLite)(e):(0,t.buildStructure)(e)},t.buildNodeStructureFromVegaLite=function(e){var t=a.GenericLimitedNavigationRules,i={},n={},o={},s=0,d=e.groupInclusionCriteria?e.groupInclusionCriteria:function(){return!0},c=e.itemInclusionCriteria?e.itemInclusionCriteria:function(){return!0},l=e.datumInclusionCriteria?e.datumInclusionCriteria:function(){return!0},u=e.vegaLiteView._renderer._origin,v=e.vegaLiteView._scenegraph.root.items[0].mark.items[0],g=function(e,t){if(e["data-navigator-id"])return e["data-navigator-id"];var i="dn-node-".concat(t,"-").concat(s);return s++,e["data-navigator-id"]=i,i},p=function(t,n,a,s,d){var c=g(t,n),u="render-"+c,v=a||[0,0];i[c]={},i[c].d={},i[c].id=c,i[c].renderId=u,i[c].index=s,i[c].level=n,i[c].parent=d,o[u]={},o[u].renderId=u,o[u].spatialProperties={},o[u].spatialProperties.x=t.bounds.x1+v[0],o[u].spatialProperties.y=t.bounds.y1+v[1],o[u].spatialProperties.width=t.bounds.x2-t.bounds.x1,o[u].spatialProperties.height=t.bounds.y2-t.bounds.y1,o[u].cssClass="dn-vega-lite-node",t.datum&&Object.keys(t.datum).forEach(function(o){var a=t.datum[o];l(o,a,t.datum,n,e.vegaLiteSpec)&&(i[c].d[e.keyRenamingHash&&e.keyRenamingHash[o]?e.keyRenamingHash[o]:o]=a)}),o[u].semantics={},o[u].semantics.label=e.nodeDescriber?e.nodeDescriber(i[c].d,t,n):(0,r.describeNode)(i[c].d)},y=0;return v.items.forEach(function(t){if(d(t,y,e.vegaLiteSpec)){p(t,"group",u,y,v);var i=0,n=t.items[0].mark.items[0].items?t.items[0].mark.items[0]:t;n.items.forEach(function(o){c(o,i,t,e.vegaLiteSpec)&&p(o,"item",u,i,n),i++})}y++}),Object.keys(i).forEach(function(t){i[t].edges=function(t){var o=i[t],a=o.index,r=o.level,s=o.parent,d=[],c=s.items[a-1];if(c){var l=g(c,r);if(i[l]){var u="".concat(l,"-").concat(o.id);d.push(u),n[u]||(n[u]={source:l,target:o.id,navigationRules:["left","right"]})}}var v=s.items[a+1];if(v){var p=g(v,r);if(i[p]){var y="".concat(o.id,"-").concat(p);d.push(y),n[y]||(n[y]={source:o.id,target:p,navigationRules:["left","right"]})}}if("group"===r&&s.items[a].items){var f=(s.items[a].items[0].mark.items[0].items||s.items[a].items)[0],m=g(f,"item");if(i[m]){var h="".concat(o.id,"-").concat(m);d.push(h),n[h]||(n[h]={source:o.id,target:m,navigationRules:["parent","child"]})}}else if("item"===r){var b=g(s,"group");if(i[b]){var _="".concat(b,"-").concat(o.id);d.push(_),n[_]||(n[_]={source:b,target:o.id,navigationRules:["parent","child"]})}}return e.exitFunction&&(d.push("any-exit"),n["any-exit"]||(n["any-exit"]={source:e.getCurrent,target:e.exitFunction,navigationRules:["exit"]})),d.push("any-undo"),n["any-undo"]||(n["any-undo"]={source:e.getCurrent,target:e.getPrevious,navigationRules:["undo"]}),d}(t)}),{nodes:i,edges:n,elementData:o,navigationRules:t}},t.addSimpleDataIDs=function(e){var t=0,i={};e.data.forEach(function(n){var o="function"==typeof e.idKey?e.idKey(n):e.idKey;n[o]="_"+t,e.keysForIdGeneration&&e.keysForIdGeneration.forEach(function(e){e in n&&("string"==typeof n[e]?(i[e]||(i[e]=0),i[n[e]]||(i[n[e]]=0),n[o]+="_"+e+i[e]+"_"+n[e]+i[n[e]],i[e]++,i[n[e]]++):(i[e]||(i[e]=0),n[o]+="_"+e+i[e],i[e]++))}),t++})},t.buildNodes=function(e){var t={};return e.data.forEach(function(i){e.idKey||console.error("Building nodes. A key string must be supplied in options.idKey to specify the id keys of every node.");var n="function"==typeof e.idKey?e.idKey(i):e.idKey,o=i[n];if(o)if(t[o])console.error("Building nodes. Each id for data in options.data must be unique. This id is not unique: ".concat(o,"."));else{var a="function"==typeof e.renderIdKey?e.renderIdKey(i):e.renderIdKey;t[o]={id:o,edges:[],renderId:a?i[a]||"":i.renderIdKey||"",data:i}}else console.error("Building nodes. Each datum in options.data must contain an id. When matching the id key string ".concat(n,", this datum has no id: ").concat(JSON.stringify(i),"."))}),t},t.scaffoldDimensions=function(e,t){var i,s,d={};if(null===(s=null===(i=e.dimensions)||void 0===i?void 0:i.parentOptions)||void 0===s?void 0:s.addLevel0){var c=e.dimensions.parentOptions.addLevel0;t[c.id]=n(n({},c),{dimensionLevel:0})}var l=o([],a.GenericFullNavigationDimensions,!0);return e.data.forEach(function(i){var a=e.dimensions.values||[],s=0;a.forEach(function(a){var c,u,v,g,p,y,f,m;if(a.dimensionKey){if(a.dimensionKey in i){var h=i[a.dimensionKey],b="function"!=typeof(null===(c=a.operations)||void 0===c?void 0:c.filterFunction)||a.operations.filterFunction(i,a);if(void 0!==h&&b){if(a.type||(a.type="bigint"==typeof h||"number"==typeof h?"numerical":"categorical"),!d[a.dimensionKey]){var _="function"==typeof a.nodeId?a.nodeId(a,e.data):a.nodeId||(0,r.createValidId)(a.dimensionKey),k="function"==typeof a.renderId?a.renderId(a,e.data):a.renderId||_;d[a.dimensionKey]={dimensionKey:a.dimensionKey,nodeId:_,divisions:{},numericalExtents:[1/0,-1/0],type:a.type,operations:{compressSparseDivisions:(null===(u=a.operations)||void 0===u?void 0:u.compressSparseDivisions)||!1,sortFunction:(null===(v=a.operations)||void 0===v?void 0:v.sortFunction)||void 0},behavior:a.behavior||{extents:"circular"},navigationRules:a.navigationRules||{sibling_sibling:l.length?o([],l.shift(),!0):["previous_"+a.dimensionKey,"next_"+a.dimensionKey],parent_child:["parent_"+a.dimensionKey,"child"]}},t[_]={id:_,renderId:k,derivedNode:a.dimensionKey,edges:[],dimensionLevel:1,data:d[a.dimensionKey],renderingStrategy:a.renderingStrategy||"singleSquare"}}var x=d[a.dimensionKey],E=null;if("categorical"===a.type){var w="function"==typeof(null===(g=a.divisionOptions)||void 0===g?void 0:g.divisionNodeIds)?a.divisionOptions.divisionNodeIds(a.dimensionKey,h,s):(0,r.createValidId)(x.nodeId+"_"+h);if(!(E=x.divisions[w])){E=x.divisions[w]={id:w,sortFunction:(null===(p=a.divisionOptions)||void 0===p?void 0:p.sortFunction)||void 0,values:{}};var I="function"==typeof(null===(y=a.divisionOptions)||void 0===y?void 0:y.divisionRenderIds)?a.divisionOptions.divisionRenderIds(a.dimensionKey,h,s):w;t[w]={id:w,renderId:I,derivedNode:a.dimensionKey,edges:[],dimensionLevel:2,data:n({},E),renderingStrategy:(null===(f=a.divisionOptions)||void 0===f?void 0:f.renderingStrategy)||"singleSquare"},t[w].data[a.dimensionKey]=h}}else{(E=x.divisions[x.nodeId])||(E=x.divisions[x.nodeId]={id:x.nodeId,sortFunction:(null===(m=a.divisionOptions)||void 0===m?void 0:m.sortFunction)||void 0,values:{}}),a.operations||(a.operations={});var O=a.operations.createNumericalSubdivisions;x.subdivisions="number"==typeof O&&O<1?1:O||1,1!==O&&(x.divisionOptions||(x.divisionOptions=a.divisionOptions),function(e,t){var i=t.numericalExtents[0],n=t.numericalExtents[1];t.numericalExtents[0]=i<e?i:e,t.numericalExtents[1]=n>e?n:e}(h,x))}var K="function"==typeof e.idKey?e.idKey(i):e.idKey;E.values[i[K]]=i}}s++}else console.error("Building nodes, parsing dimensions. Each dimension in options.dimensions must contain a dimensionKey. This dimension has no key: ".concat(JSON.stringify(a),"."))})}),Object.keys(d).forEach(function(e){var i,n,o,a,r,s=d[e],c=s.divisions;if("numerical"===s.type){c[s.nodeId].values=Object.fromEntries(Object.entries(c[s.nodeId].values).sort(function(t,i){var n;return"function"==typeof(null===(n=s.operations)||void 0===n?void 0:n.sortFunction)?s.operations.sortFunction(t[1],i[1],s):t[1][e]-i[1][e]}));var l=c[s.nodeId].values;if(s.numericalExtents[0]!==1/0&&1!==s.subdivisions){var u=Object.keys(l),v="function"==typeof s.subdivisions?s.subdivisions(e,l):s.subdivisions,g=(s.numericalExtents[1]-s.numericalExtents[0])/v,p=s.numericalExtents[0]+g,y=0;for(p=s.numericalExtents[0]+g;p<=s.numericalExtents[1];p+=g){var f="function"==typeof(null===(i=s.divisionOptions)||void 0===i?void 0:i.divisionNodeIds)?s.divisionOptions.divisionNodeIds(e,p,p):s.nodeId+"_"+p;s.divisions[f]={id:f,sortFunction:(null===(n=s.divisionOptions)||void 0===n?void 0:n.sortFunction)||void 0,values:{}};var m="function"==typeof(null===(o=s.divisionOptions)||void 0===o?void 0:o.divisionRenderIds)?s.divisionOptions.divisionRenderIds(e,p,p):f;t[f]={id:f,renderId:m,derivedNode:e,edges:[],data:s.divisions[f],dimensionLevel:2,renderingStrategy:(null===(a=s.divisionOptions)||void 0===a?void 0:a.renderingStrategy)||"singleSquare"};for(var h=!1;!h&&y<u.length;){var b=l[u[y]];b[e]<=p?s.divisions[f].values[b.id]=b:(p+=g,h=!0),y++}}delete c[e]}}else"function"==typeof(null===(r=s.operations)||void 0===r?void 0:r.sortFunction)&&(s.divisions=Object.fromEntries(Object.entries(c).sort(function(e,t){return s.operations.sortFunction(e[1],t[1],s)})));Object.keys(s.divisions).forEach(function(e){var t=s.divisions[e];"function"==typeof t.sortFunction&&(t.values=Object.fromEntries(Object.entries(t.values).sort(function(e,i){return t.sortFunction(e[1],i[1],t)})))})}),Object.keys(d).forEach(function(e){var i=d[e];if(i.operations.compressSparseDivisions){var o=Object.keys(i.divisions),a={},r=!0;if(o.forEach(function(e){var t=i.divisions[e],o=Object.keys(t.values);o.length<=1?o.forEach(function(e){a[e]=n({},t.values[e])}):r=!1}),r){var s={id:i.nodeId,values:a};o.forEach(function(e){delete t[e]}),i.divisions={},i.divisions[i.nodeId]=s}}}),e.dimensions.adjustDimensions&&(d=e.dimensions.adjustDimensions(d)),d},t.buildEdges=function(e,t,i){var n,a,r,s,d,c,l,u,v,g,p={},y=function(e,i){-1===t[e].edges.indexOf(i)&&t[e].edges.push(i)},f=function(t,i,n,a){var r="".concat(t,"-").concat(i),s=e.useDirectedEdges?"".concat(i,"-").concat(r):r,d=!a||"source"===a,c=!a||"target"===a,l=function(e){var a;p[e]?(a=p[e].navigationRules).push.apply(a,n||[]):p[e]={source:t,target:i,navigationRules:n?o([],n,!0):[]}};l(r),e.useDirectedEdges&&c&&l(s),d&&y(t,r),c&&y(i,s)};if(i&&Object.keys(i).length){var m=Object.keys(i),h=null===(r=null===(a=null===(n=e.dimensions)||void 0===n?void 0:n.parentOptions)||void 0===a?void 0:a.level1Options)||void 0===r?void 0:r.order,b=h||m,_=0,k=(null===(s=e.dimensions)||void 0===s?void 0:s.parentOptions)||{},x=(null===(c=null===(d=k.level1Options)||void 0===d?void 0:d.behavior)||void 0===c?void 0:c.extents)||"terminal",E=k.addLevel0,w=E?(null===(u=null===(l=k.level1Options)||void 0===l?void 0:l.navigationRules)||void 0===u?void 0:u.parent_child)||["parent","child"]:[],I=(null===(g=null===(v=k.level1Options)||void 0===v?void 0:v.navigationRules)||void 0===g?void 0:g.sibling_sibling)||["left","right"],O="string"==typeof b[0]?h?t[b[0]]:t[i[b[0]].nodeId]:b[0];E&&f(E.id,O.id,w,"source"),b.forEach(function(n){var o="string"==typeof n?h?t[n]:t[i[n].nodeId]:n;if(o!==n||t[o.id]||(t[o.id]=o),E&&(e.useDirectedEdges?f(o.id,E.id,w,"source"):f(E.id,o.id,w,"target")),_===b.length-1&&"circular"===x)f(o.id,O.id,I);else if(_===b.length-1&&"bridgedCustom"===x)f(o.id,k.level1Options.behavior.customBridgePost,I);else if(_<b.length-1){var a="string"==typeof b[_+1]?h?t[b[_+1]]:t[i[b[_+1]].nodeId]:b[_+1];f(o.id,a.id,I)}_||"bridgedCustom"!==x||f(k.level1Options.behavior.customBridgePost,o.id,I),_++}),m.forEach(function(t){var n,o,a,r,s=i[t],d=(null===(n=s.behavior)||void 0===n?void 0:n.childmostNavigation)||"within",c="across"===d&&(null===(o=s.behavior)||void 0===o?void 0:o.childmostMatching)?null===(a=s.behavior)||void 0===a?void 0:a.childmostMatching:function(e,t,i,n){return n.values[Object.keys(n.values)[e]]||void 0},l=(null===(r=s.behavior)||void 0===r?void 0:r.extents)||"circular";s.divisions||console.error("Parsing dimensions. The dimension using the key ".concat(t," is missing the divisions property. dimension.divisions should be supplied. ").concat(JSON.stringify(s),"."));var u=Object.keys(s.divisions),v=s.divisions[u[0]];if(1!==u.length)f(s.nodeId,v.id,s.navigationRules.parent_child,"source");else{var g=Object.keys(v.values),p="function"==typeof e.idKey?e.idKey(v.values[g[0]]):e.idKey;f(s.nodeId,v.values[g[0]][p],s.navigationRules.parent_child,"source")}var y=0;u.forEach(function(t){var i=s.divisions[t];y!==u.length-1||"circular"!==l&&"bridgedCousins"!==l&&"bridgedCustom"!==l?y<u.length-1&&f(i.id,s.divisions[u[y+1]].id,s.navigationRules.sibling_sibling):f(i.id,s.divisions[u[0]].id,s.navigationRules.sibling_sibling);var n=Object.keys(i.values);e.useDirectedEdges?f(i.id,s.nodeId,s.navigationRules.parent_child,"source"):f(s.nodeId,i.id,s.navigationRules.parent_child,"target");var o="function"==typeof e.idKey?e.idKey(i.values[n[0]]):e.idKey;f(i.id,i.values[n[0]][o],s.navigationRules.parent_child,"source");var a=0;n.length>1&&n.forEach(function(t){var o=i.values[t],r="function"==typeof e.idKey?e.idKey(o):e.idKey,v=1!==u.length?i.id:s.nodeId;if(e.useDirectedEdges?f(o[r],v,s.navigationRules.parent_child,"source"):f(v,o[r],s.navigationRules.parent_child,"target"),"within"===d){if(a===n.length-1&&"circular"===l){var g="function"==typeof e.idKey?e.idKey(i.values[n[0]]):e.idKey;f(o[r],i.values[n[0]][g],s.navigationRules.sibling_sibling)}else a===n.length-1&&"bridgedCousins"===l?y!==u.length-1?(g="function"==typeof e.idKey?e.idKey(s.divisions[u[y+1]].values[n[0]]):e.idKey,f(o[r],s.divisions[u[y+1]].values[n[0]][g],s.navigationRules.sibling_sibling)):(g="function"==typeof e.idKey?e.idKey(s.divisions[u[0]].values[n[0]]):e.idKey,f(o[r],s.divisions[u[0]].values[n[0]][g],s.navigationRules.sibling_sibling)):a===n.length-1&&"bridgedCustom"===l?f(o[r],s.behavior.customBridgePost,s.navigationRules.sibling_sibling):a<n.length-1&&(g="function"==typeof e.idKey?e.idKey(i.values[n[a+1]]):e.idKey,f(o[r],i.values[n[a+1]][g],s.navigationRules.sibling_sibling));a||"bridgedCousins"!==l?a||"bridgedCustom"!==l||f(s.behavior.customBridgePrevious,o[r],s.navigationRules.sibling_sibling):0!==y?(g="function"==typeof e.idKey?e.idKey(s.divisions[u[y-1]].values[n[n.length-1]]):e.idKey,f(s.divisions[u[y-1]].values[n[n.length-1]][g],o[r],s.navigationRules.sibling_sibling)):(g="function"==typeof e.idKey?e.idKey(s.divisions[u[u.length-1]].values[n[n.length-1]]):e.idKey,f(s.divisions[u[u.length-1]].values[n[n.length-1]][g],o[r],s.navigationRules.sibling_sibling))}else if(y===u.length-1&&"bridgedCustom"===l)f(o[r],s.behavior.customBridgePost,s.navigationRules.sibling_sibling);else if(y||"bridgedCustom"!==l){var p=y===u.length-1&&"circular"===l?s.divisions[u[0]]:s.divisions[u[y+1]];if(p){var m=c(a,o[r],i,p);m&&(g="function"==typeof e.idKey?e.idKey(m):e.idKey,f(o[r],m[g],s.navigationRules.sibling_sibling))}}else f(s.behavior.customBridgePrevious,o[r],s.navigationRules.sibling_sibling);a++}),y++})})}return Object.keys(t).forEach(function(i){var n,o=t[i];(null===(n=e.genericEdges)||void 0===n?void 0:n.length)&&e.genericEdges.forEach(function(e){p[e.edgeId]||(p[e.edgeId]=e.edge),(!e.conditional||e.conditional&&e.conditional(o,e))&&o.edges.push(e.edgeId)})}),p},t.buildRules=function(e,t,i){var r,s,d,c,l=e.navigationRules;if(!l){var u=Object.keys(i||{});u.length>6&&console.error("Building navigationRules. Dimension count is too high to automatically generate key commands. It is recommend you reduce your dimensions to 6 or fewer for end-user experience. If not, you must provide your own navigation rules in options.navigationRules. Details: Count is ".concat(u.length,". Dimensions counted: ").concat(u.join(", "),"."));var v={},g={},p={},y=o([],a.TypicallyUnreservedKeyPairs,!0),f=o([],a.TypicallyUnreservedKeys,!0),m=function(t,i){var a=t&&i,r=!1,s=!1;if((v[t]||g[t])&&(g[t]=n({},v[t]),r=!0),i&&(v[i]||g[i])&&(g[i]=n({},v[i]),s=!0),!a||r||s){if(!g[t]&&f.length){var d=f.shift(),c=[];y.forEach(function(e){d!==e[0]&&d!==e[1]&&c.push(e)}),y=c,g[t]={direction:e.useDirectedEdges?"target":"source",key:d}}if(i&&!g[i]&&f.length){var l=f.shift(),u=[];y.forEach(function(e){l!==e[0]&&l!==e[1]&&u.push(e)}),y=u,g[i]={direction:"target",key:l}}f.length||(g[t]||(p[t]=t),i&&!g[i]&&(p[i]=i))}else{y.length||console.error("Building navigationRules. Dimension count is too high to automatically generate key commands, we have run out of keyboard key pairs to assign. You must either provide your own navigation rules in options.navigationRules, provide rules when generating dimensions, or reduce dimension count.");var m=o([],y.shift(),!0);f.splice(f.indexOf(m[0]),1),f.splice(f.indexOf(m[1]),1),g[t]={direction:e.useDirectedEdges?"target":"source",key:m[0]},g[i]={direction:"target",key:m[1]}}};if(Object.keys(a.GenericFullNavigationRules).forEach(function(t){var i=n({},a.GenericFullNavigationRules[t]);e.useDirectedEdges&&(i.direction="target"),v[t]=i}),u.length){if(null===(s=null===(r=e.dimensions)||void 0===r?void 0:r.parentOptions)||void 0===s?void 0:s.addLevel0){var h=(null===(c=null===(d=e.dimensions.parentOptions.level1Options)||void 0===d?void 0:d.navigationRules)||void 0===c?void 0:c.parent_child)||["parent","child"];m(h[0],h[1])}u.forEach(function(e){var t=i[e].navigationRules.parent_child,n=i[e].navigationRules.sibling_sibling;m(t[0],t[1]),m(n[0],n[1])})}if(Object.keys(t).forEach(function(e){t[e].navigationRules.forEach(function(e){g[e]||m(e)})}),Object.keys(p).length){var b={};Object.keys(g).forEach(function(e){b[g[e].key]=g[e].key}),Object.keys(v).forEach(function(e){b[v[e].key]||a.SemanticKeys[v[e].key]||f.push(v[e].key)});var _=n({},p);p={},Object.keys(_).forEach(function(e){m(e)}),Object.keys(p).length&&console.error("Building navigationRules. There are no more keys left to assign automatically. Recommended fixes: use fewer dimensions, use fewer GenericEdges, or build your own navigationRules. Rules remaining without keyboard keys: ".concat(Object.keys(p).join(", "),"."))}l=g}return l},t.buildStructure=function(e){e.addIds&&(0,t.addSimpleDataIDs)(e);var i=(0,t.buildNodes)(e),n=(0,t.scaffoldDimensions)(e,i),o=(0,t.buildEdges)(e,i,n);return{nodes:i,edges:o,dimensions:n,navigationRules:(0,t.buildRules)(e,o,n)}}},156(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(149),o=i(788),a=i(676);t.default={structure:n.default,input:o.default,rendering:a.default}},676(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,a=t.length;o<a;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var a=i(66);t.default=function(e){var t=function(e){r.wrapper.setAttribute("aria-activedescendant",e.srcElement.id)},i=function(){r.wrapper.setAttribute("aria-activedescendant","")},r={},s=!1,d={cssClass:a.NodeElementDefaults.cssClass,spatialProperties:n({},a.NodeElementDefaults.spatialProperties),semantics:n({},a.NodeElementDefaults.semantics),parentSemantics:n({},a.NodeElementDefaults.parentSemantics),existingElement:n({},a.NodeElementDefaults.existingElement)};return e.defaults&&(d.cssClass=e.defaults.cssClass||d.cssClass,d.spatialProperties=e.defaults.spatialProperties?n(n({},d.spatialProperties),e.defaults.spatialProperties):d.spatialProperties,d.semantics=e.defaults.semantics?n(n({},d.semantics),e.defaults.semantics):d.semantics,d.parentSemantics=e.defaults.parentSemantics?n(n({},d.parentSemantics),e.defaults.parentSemantics):d.parentSemantics,d.existingElement=e.defaults.existingElement?n(n({},d.existingElement),e.defaults.existingElement):d.existingElement),r.initialize=function(){var t;if(s)console.error("The renderer wrapper has already been initialized successfully, RenderingOptions.suffixId is: ".concat(e.suffixId,". No further action was taken."));else if(e.root&&document.getElementById(e.root.id)){if(r.root=document.getElementById(e.root.id),r.root.style.position="relative",r.root.classList.add("dn-root"),e.suffixId)return r.wrapper=document.createElement("div"),r.wrapper.id="dn-wrapper-"+e.suffixId,r.wrapper.setAttribute("role","application"),r.wrapper.setAttribute("aria-label",e.root.description||"Data navigation structure"),r.wrapper.setAttribute("aria-activedescendant",""),r.wrapper.classList.add("dn-wrapper"),r.wrapper.style.width=e.root&&e.root.width?e.root.width:"100%",e.root&&e.root.height&&(r.wrapper.style.height=e.root.height),e.entryButton&&e.entryButton.include&&(r.entryButton=document.createElement("button"),r.entryButton.id="dn-entry-button-"+e.suffixId,r.entryButton.classList.add("dn-entry-button"),r.entryButton.innerText="Enter navigation area",e.entryButton.callbacks&&e.entryButton.callbacks.click&&r.entryButton.addEventListener("click",e.entryButton.callbacks.click),e.entryButton.callbacks&&e.entryButton.callbacks.focus&&r.entryButton.addEventListener("focus",e.entryButton.callbacks.focus),r.wrapper.appendChild(r.entryButton)),r.root.appendChild(r.wrapper),(null===(t=e.exitElement)||void 0===t?void 0:t.include)&&(r.exitElement=document.createElement("div"),r.exitElement.id="dn-exit-"+e.suffixId,r.exitElement.classList.add("dn-exit-position"),r.exitElement.innerText="End of data structure.",r.exitElement.setAttribute("aria-label","End of data structure."),r.exitElement.setAttribute("role","note"),r.exitElement.setAttribute("tabindex","-1"),r.exitElement.style.display="none",r.exitElement.addEventListener("focus",function(t){var i,n;r.exitElement.style.display="block",r.clearStructure(),(null===(n=null===(i=e.exitElement)||void 0===i?void 0:i.callbacks)||void 0===n?void 0:n.focus)&&e.exitElement.callbacks.focus(t)}),r.exitElement.addEventListener("blur",function(t){var i,n;r.exitElement.style.display="none",(null===(n=null===(i=e.exitElement)||void 0===i?void 0:i.callbacks)||void 0===n?void 0:n.blur)&&e.exitElement.callbacks.blur(t)}),r.root.appendChild(r.exitElement)),s=!0,r.root;console.error("No suffix id found: options.suffixId must be specified.")}else console.error("No root element found, cannot build: RenderingOptions.root.id must reference an existing DOM element in order to render children.")},r.render=function(n){var o=n.renderId+"",a=e.elementData[o];if(a){if(s){var c=!1,l={},u=function(e,t,i){var o=a[e]||d[e],r=i&&c?l[t]:o[t],s=d[e][t];return"function"==typeof o?o(a,n.datum):"function"==typeof r?r(a,n.datum):r||s||(t?void 0:o)};c=u("existingElement","useForSpatialProperties"),l=u("existingElement","spatialProperties");var v=parseFloat(u("spatialProperties","width",!0)||0),g=parseFloat(u("spatialProperties","height",!0)||0),p=parseFloat(u("spatialProperties","x",!0)||0),y=parseFloat(u("spatialProperties","y",!0)||0),f=document.createElement(u("parentSemantics","elementType")),m=u("parentSemantics","attributes");"object"==typeof m&&Object.keys(m).forEach(function(e){f.setAttribute(e,m[e])}),f.setAttribute("role",u("parentSemantics","role")),f.id=o,f.classList.add("dn-node"),f.classList.add(u("cssClass")),f.style.width=v+"px",f.style.height=g+"px",f.style.left=p+"px",f.style.top=y+"px",f.setAttribute("tabindex","0"),f.addEventListener("focus",t),f.addEventListener("blur",i);var h=document.createElement(u("semantics","elementType")),b=u("semantics","attributes");"object"==typeof b&&Object.keys(b).forEach(function(e){f.setAttribute(e,b[e])}),h.setAttribute("role",u("semantics","role")),h.classList.add("dn-node-text"),a.showText&&(h.innerText=a.semantics.label);var _=u("semantics","label");_||console.error("Accessibility error: a label must be supplied to every rendered element using semantics.label."),h.setAttribute("aria-label",_),f.appendChild(h);var k=u("spatialProperties","path");if(k){var x=v+p+10,E=g+y+10,w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.setAttribute("width",x+""),w.setAttribute("height",E+""),w.setAttribute("viewBox","0 0 ".concat(x," ").concat(E)),w.style.left=-p+"px",w.style.top=-y+"px",w.classList.add("dn-node-svg"),w.setAttribute("role","presentation"),w.setAttribute("focusable","false");var I=document.createElementNS("http://www.w3.org/2000/svg","path");I.setAttribute("d",k),I.classList.add("dn-node-path"),w.appendChild(I),f.appendChild(w)}return r.wrapper.appendChild(f),f}console.error("render() was called before initialize(), renderer must be initialized first.")}else console.warn("Render data not found with renderId: ".concat(o,". Failed to render."))},r.remove=function(e){var n=document.getElementById(e);r.wrapper.getAttribute("aria-activedescendant")===e&&r.wrapper.setAttribute("aria-activedescendant",""),n&&(n.removeEventListener("focus",t),n.removeEventListener("blur",i),n.remove())},r.clearStructure=function(){o([],r.wrapper.children,!0).forEach(function(e){r.entryButton&&r.entryButton===e||r.remove(e.id)})},r}},788(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(66);t.default=function(e){var t={},i=n.defaultKeyBindings,o=n.GenericFullNavigationRules;return t.moveTo=function(t){var i=e.structure.nodes[t];if(i)return i},t.move=function(i,n){if(i){var a=e.structure.nodes[i];if(a.edges){var r=null,s=0,d=o[n];if(!d)return;var c=function(){var t=e.structure.edges[a.edges[s]];if(t.navigationRules.forEach(function(e){r||(r=function(e,t){if(e!==n)return null;var o={target:"string"==typeof t.target?t.target:t.target(a,i),source:"string"==typeof t.source?t.source:t.source(a,i)};return o[d.direction]!==i?o[d.direction]:null}(e,t))}),r)return"break"};for(s=0;s<a.edges.length&&"break"!==c();s++);return r?t.moveTo(r):void 0}}},t.enter=function(){return e.entryPoint?t.moveTo(e.entryPoint):void console.error("No entry point was specified in InputOptions, returning undefined")},t.exit=function(){return e.exitPoint?e.exitPoint:void console.error("No exit point was specified in InputOptions, returning undefined")},t.keydownValidator=function(e){var t=i[e.code];if(t)return t},t.focus=function(e){var t=document.getElementById(e);t&&t.focus()},t.setNavigationKeyBindings=function(e){e?(i={},o=e,Object.keys(e).forEach(function(t){var n=e[t];i[n.key]=t})):(i=n.defaultKeyBindings,o=n.GenericFullNavigationRules)},t.setNavigationKeyBindings(e.navigationRules),t}},864(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createValidId=t.describeNode=void 0,t.describeNode=function(e,t){var i=Object.keys(e),n="";return i.forEach(function(i){n+="".concat(t&&t.omitKeyNames?"":i+": ").concat(e[i],". ")}),n+=t&&t.semanticLabel||"Data point."},t.createValidId=function(e){return"_"+e.replace(/[^a-zA-Z0-9_-]+/g,"_")}}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,i),a.exports}var n=i(156),o=i(864);let a={};const r=(e,t,i)=>{let n=[];return t&&t.forEach(e=>{let t={id:e};n.push(t)}),Object.keys(e).forEach(t=>{if(i){let e=!1;if(i.forEach(i=>{t===i&&(e=!0)}),e)return}n.push(e[t])}),n},s=(e,t)=>{document.getElementById(e+"-tooltip").classList.add("hidden"),t&&document.getElementById(e+"-focus-indicator").classList.add("hidden")},d=(e,t,i,n,o)=>{const a=document.getElementById(t+"-tooltip");a.classList.remove("hidden"),a.innerText=e.semantics?.label||`${e.id}${e.data?.[n]?", "+e.data[n]:""} (generic node, edges hidden).`;const r=a.getBoundingClientRect().height/2;if(a.style.textAlign="left",a.style.transform=`translate(${i}px,${i/2-r}px)`,o){const i=document.getElementById("dn-root-"+t).querySelector("svg");let n=document.getElementById(t+"-focus-indicator");n||(n=document.createElementNS("http://www.w3.org/2000/svg","circle"),n.id=t+"-focus-indicator",n.setAttribute("class","dn-focus-indicator hidden"),n.setAttribute("cx",0),n.setAttribute("cy",0),n.setAttribute("r",6.5),n.setAttribute("fill","none"),n.setAttribute("stroke","#000"),n.setAttribute("stroke-width","2"),i.appendChild(n));let o=i.querySelector("#svg"+e.renderId);n.setAttribute("cx",o.getAttribute("cx")),n.setAttribute("cy",o.getAttribute("cy")),n.classList.remove("hidden")}},c=(e,t,i,c,l,u,v)=>{let g,p,y;((e,t,i)=>{Object.keys(e).forEach(n=>{let a=e[n];a.renderId||(a.renderId=a.id);let r="";if(a.existingElement={useForSpatialProperties:!0,spatialProperties:()=>{let e=document.getElementById(t).querySelector("#svg"+a.renderId).getBBox();return{x:e.x+i/2-.91,y:e.y+i/2-.91,width:e.width,height:e.height}}},a.derivedNode)if(a.data.dimensionKey){let e=0,t=Object.keys(a.data.divisions);t.length&&t.forEach(t=>{e+=Object.keys(a.data.divisions[t].values).length}),r=`${a.derivedNode}.`,r+=t.length&&e?` Contains ${t.length} division${t.length>1?"s":""} which contain ${e} datapoint${e>1?"s":""} total.`:" Contains no child data points.",r+=` ${a.data.type} dimension.`}else r=`${a.derivedNode}: ${a.data[a.derivedNode]}. Contains ${Object.keys(a.data.values).length} child data point${Object.keys(a.data.values).length>1?"s":""}. Division of ${a.derivedNode} dimension.`;else r=(0,o.describeNode)(a.data,{});a.semantics={label:r}})})(e.nodes,t,i);let f=function({nodes:e,links:t},{nodeId:i=e=>e.id,nodeGroup:n,nodeGroups:o,nodeTitle:a,nodeFill:r="currentColor",nodeStroke:s="#fff",nodeStrokeWidth:d=1.5,nodeStrokeOpacity:c=1,nodeRadius:l=5,nodeStrength:u,linkSource:v=({source:e})=>e,linkTarget:g=({target:e})=>e,linkStroke:p="#999",linkStrokeOpacity:y=.6,linkStrokeWidth:f=1.5,linkStrokeLinecap:m="round",linkStrength:h,colors:b=d3.schemeTableau10,width:_=640,height:k=400,invalidation:x,description:E,hide:w}={}){const I=d3.map(e,i).map(T),O="function"!=typeof l?null:d3.map(e,l),K=d3.map(t,v).map(T),R=d3.map(t,g).map(T);void 0===a&&(a=(e,t)=>I[t]);const S=null==a?null:d3.map(e,a),A=null==n?null:d3.map(e,n).map(T),B="function"!=typeof f?null:d3.map(t,f),j="function"!=typeof p?null:d3.map(t,p);e=d3.map(e,(e,t)=>({id:I[t]})),t=d3.map(t,(e,t)=>({source:K[t],target:R[t]})),E=("function"==typeof E?E(e,t):E)||`Node-link graph. Contains ${e.length} node${1!==e.length?"s":""} and ${t.length} link${1!==t.length?"s":""}.`,A&&void 0===o&&(o=d3.sort(A));const L=null==n?null:d3.scaleOrdinal(o,b),N=d3.forceManyBody(),D=d3.forceLink(t).id(({index:e})=>I[e]);void 0!==u&&N.strength(u),void 0!==h&&D.strength(h);const C=d3.forceSimulation(e).force("link",D).force("charge",N).force("center",d3.forceCenter()).on("tick",function(){G.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),F.attr("cx",e=>{let t=_/2-l;return e.x>t||e.x<-t?t:e.x}).attr("cy",e=>{let t=k/2-l;return e.y>t||e.y<-t?t:e.y})}),P=d3.create("svg").attr("width",_).attr("height",k).attr("viewBox",[-_/2,-k/2,_,k]).attr("role",w?"presentation":"img").attr("aria-label",w?null:E).attr("style","max-width: 100%; height: auto; height: intrinsic;"),G=P.append("g").attr("stroke","function"!=typeof p?p:null).attr("stroke-opacity",y).attr("stroke-width","function"!=typeof f?f:null).attr("stroke-linecap",m).selectAll("line").data(t).join("line"),F=P.append("g").attr("fill",r).attr("stroke",s).attr("stroke-opacity",c).attr("stroke-width",d).selectAll("circle").data(e).join("circle").attr("r",l).attr("role","presentation").call(function(e){return d3.drag().on("start",function(t){t.active||e.alphaTarget(.3).restart(),t.subject.fx=t.subject.x,t.subject.fy=t.subject.y}).on("drag",function(e){e.subject.fx=e.x,e.subject.fy=e.y}).on("end",function(t){t.active||e.alphaTarget(0),t.subject.fx=null,t.subject.fy=null})}(C));function T(e){return null!==e&&"object"==typeof e?e.valueOf():e}return B&&G.attr("stroke-width",({index:e})=>B[e]),j&&G.attr("stroke",({index:e})=>j[e]),A&&F.attr("fill",({index:e})=>L(A[e])),O&&F.attr("r",({index:e})=>O[e]),S&&F.append("title").text(({index:e})=>S[e]),null!=x&&x.then(()=>C.stop()),Object.assign(P.node(),{scales:{color:L}})}({nodes:r(e.nodes,u),links:r(e.edges,[],v)},{nodeId:e=>e.id,nodeGroup:e=>"dimensionLevel"===c?e.dimensionLevel:e.data?.[c],width:i,height:i});document.getElementById(t).appendChild(f),document.getElementById(t).querySelectorAll("circle").forEach(n=>{n.id="svg"+n.__data__?.id,n.addEventListener("mousemove",n=>{if(n.target?.__data__?.id){let o=n.target.__data__;d(e.nodes[o.id]||o,t,i,c)}}),n.addEventListener("mouseleave",()=>{s(t)})}),a[t]=()=>{g=!1,m.exitElement.style.display="block",h.focus(m.exitElement.id),p=y,y=null,m.remove(p)};const m=((e,t)=>n.rendering({elementData:e.nodes,defaults:{cssClass:"dn-test-class"},suffixId:"data-navigator-schema-"+t,root:{id:"dn-root-"+t,cssClass:"",width:"100%",height:0},entryButton:{include:!0,callbacks:{click:()=>{(()=>{const e=h.enter();e&&b(e)})()}}},exitElement:{include:!0}}))(e,t);m.initialize();const h=n.input({structure:e,navigationRules:e.navigationRules,entryPoint:l,exitPoint:m.exitElement.id}),b=e=>{console.log("lifecycle nextNode",e);const n=m.render({renderId:e.renderId,datum:e});n.addEventListener("keydown",e=>{const t=h.keydownValidator(e);t&&(e.preventDefault(),(e=>{const t=h.move(y,e);t&&b(t)})(t))}),n.addEventListener("blur",e=>{s(t,!0)}),n.addEventListener("focus",n=>{d(e,t,i,c,!0)}),h.focus(e.renderId),g=!0,p=y,y=e.id,m.remove(p)}},l=[{id:"a",cat:"meow",num:3},{id:"b",cat:"meow",num:1},{id:"c",cat:"meow",num:2},{id:"d",cat:"bork",num:4}];let u=n.structure({data:l,idKey:"id",dimensions:{values:[{dimensionKey:"cat",type:"categorical",behavior:{extents:"circular"}},{dimensionKey:"num",type:"numerical",behavior:{extents:"terminal"}}]},genericEdges:[{edgeId:"any-exit",edge:{source:(e,t)=>t,target:()=>(a.simple(),""),navigationRules:["exit"]}}]});console.log("simpleStructure",u),c(u,"simple",300,"dimensionLevel",u.dimensions[Object.keys(u.dimensions)[0]].nodeId,["exit"],["any-exit"]);let v=[];l.forEach(e=>{v.push({...e})}),v.push({id:"e",cat:"bork",num:12});let g=n.structure({data:v,addIds:!0,idKey:"addedId",dimensions:{values:[{dimensionKey:"cat",nodeId:"_cat2",type:"categorical",behavior:{extents:"circular"}},{dimensionKey:"num",nodeId:(e,t)=>e.dimensionKey+"2",type:"numerical",behavior:{extents:"terminal"}}]},genericEdges:[{edgeId:"any-exit",edge:{source:(e,t)=>t,target:()=>(a.added(),""),navigationRules:["exit"]}},{edgeId:"test1",edge:{source:"testA",target:"testB",navigationRules:["test1"]}},{edgeId:"test2",edge:{source:"testA",target:"testB",navigationRules:["test2"]}},{edgeId:"test3",edge:{source:"testA",target:"testB",navigationRules:["test3"]}},{edgeId:"test4",edge:{source:"testA",target:"testB",navigationRules:["test4"]}},{edgeId:"test5",edge:{source:"testA",target:"testB",navigationRules:["test5"]}}]});console.log("addedDataStructure",g),c(g,"added",300,"dimensionLevel",g.dimensions[Object.keys(g.dimensions)[0]].nodeId,["exit","test1","test2","test3","test4","test5"],["any-exit","test1","test2","test3","test4","test5"]);const p=[{date:"2016-01-01",category:"Group A",value:120,count:420},{date:"2016-02-01",category:"Group A",value:121,count:439},{date:"2016-03-01",category:"Group A",value:119,count:402},{date:"2016-04-01",category:"Group A",value:114,count:434},{date:"2016-05-01",category:"Group A",value:102,count:395},{date:"2016-06-01",category:"Group A",value:112,count:393},{date:"2016-07-01",category:"Group A",value:130,count:445},{date:"2016-08-01",category:"Group A",value:124,count:456},{date:"2016-09-01",category:"Group A",value:119,count:355},{date:"2016-10-01",category:"Group A",value:106,count:464},{date:"2016-11-01",category:"Group A",value:123,count:486},{date:"2016-12-01",category:"Group A",value:133,count:491},{date:"2016-01-01",category:"Group B",value:89,count:342},{date:"2016-02-01",category:"Group B",value:93,count:434},{date:"2016-03-01",category:"Group B",value:82,count:378},{date:"2016-04-01",category:"Group B",value:92,count:323},{date:"2016-05-01",category:"Group B",value:90,count:434},{date:"2016-06-01",category:"Group B",value:85,count:376},{date:"2016-07-01",category:"Group B",value:88,count:404},{date:"2016-08-01",category:"Group B",value:84,count:355},{date:"2016-09-01",category:"Group B",value:90,count:432},{date:"2016-10-01",category:"Group B",value:80,count:455},{date:"2016-11-01",category:"Group B",value:92,count:445},{date:"2016-12-01",category:"Group B",value:97,count:321},{date:"2016-01-01",category:"Group C",value:73,count:456},{date:"2016-02-01",category:"Group C",value:74,count:372},{date:"2016-03-01",category:"Group C",value:68,count:323},{date:"2016-04-01",category:"Group C",value:66,count:383},{date:"2016-05-01",category:"Group C",value:72,count:382},{date:"2016-06-01",category:"Group C",value:70,count:365},{date:"2016-07-01",category:"Group C",value:74,count:296},{date:"2016-08-01",category:"Group C",value:68,count:312},{date:"2016-09-01",category:"Group C",value:75,count:334},{date:"2016-10-01",category:"Group C",value:66,count:386},{date:"2016-11-01",category:"Group C",value:85,count:487},{date:"2016-12-01",category:"Group C",value:89,count:512},{date:"2016-01-01",category:"Other",value:83,count:432},{date:"2016-02-01",category:"Other",value:87,count:364},{date:"2016-03-01",category:"Other",value:76,count:334},{date:"2016-04-01",category:"Other",value:86,count:395},{date:"2016-05-01",category:"Other",value:87,count:354},{date:"2016-06-01",category:"Other",value:77,count:386},{date:"2016-07-01",category:"Other",value:79,count:353},{date:"2016-08-01",category:"Other",value:85,count:288},{date:"2016-09-01",category:"Other",value:87,count:353},{date:"2016-10-01",category:"Other",value:76,count:322},{date:"2016-11-01",category:"Other",value:96,count:412},{date:"2016-12-01",category:"Other",value:104,count:495}];let y=n.structure({data:p,idKey:"id",addIds:!0,dimensions:{values:[{dimensionKey:"category",type:"categorical",divisionOptions:{divisionNodeIds:(e,t,i)=>(0,o.createValidId)(e+t+i)},behavior:{extents:"circular"}},{dimensionKey:"date",type:"categorical",behavior:{extents:"circular"},operations:{sortFunction:(e,t,i)=>{if(e.values)return new Date(e.values[Object.keys(e.values)[0]].date)-new Date(t.values[Object.keys(t.values)[0]].date)}}}]},genericEdges:[{edgeId:"any-exit",edge:{source:(e,t)=>t,target:()=>(a.larger(),""),navigationRules:["exit"]}}]});console.log("largerStructure",y),c(y,"larger",325,"dimensionLevel",y.dimensions[Object.keys(y.dimensions)[0]].nodeId,["exit"],["any-exit"]);let f=n.structure({data:p,idKey:"id",addIds:!0,dimensions:{values:[{dimensionKey:"category",type:"categorical",divisionOptions:{divisionNodeIds:(e,t,i)=>(0,o.createValidId)(e+t+i)},behavior:{extents:"circular",childmostNavigation:"across"}},{dimensionKey:"date",type:"categorical",behavior:{extents:"circular",childmostNavigation:"across"},operations:{sortFunction:(e,t,i)=>{if(e.values)return new Date(e.values[Object.keys(e.values)[0]].date)-new Date(t.values[Object.keys(t.values)[0]].date)}}}]},genericEdges:[{edgeId:"any-exit",edge:{source:(e,t)=>t,target:()=>(a.larger(),""),navigationRules:["exit"]}}]});console.log("stackedStructure1",f),c(f,"stacked",325,"dimensionLevel",y.dimensions[Object.keys(y.dimensions)[0]].nodeId,["exit"],["any-exit"]);const m=[{cat:"meow",num:3},{cat:"quack",num:1},{cat:"moo",num:2},{cat:"bork",num:4}];let h=n.structure({data:m,idKey:"cat",dimensions:{values:[{dimensionKey:"cat",type:"categorical",behavior:{extents:"circular"}}]},genericEdges:[{edgeId:"any-exit",edge:{source:(e,t)=>t,target:()=>(a.sparse(),""),navigationRules:["exit"]}}]});console.log("sparseStructure",h),c(h,"sparse",300,"dimensionLevel",h.dimensions[Object.keys(h.dimensions)[0]].nodeId,["exit"],["any-exit"]);let b=n.structure({data:m,idKey:"catKey",keysForIdGeneration:["cat"],addIds:!0,dimensions:{values:[{dimensionKey:"cat",type:"categorical",behavior:{extents:"circular"},operations:{compressSparseDivisions:!0}}]},genericEdges:[{edgeId:"any-exit",edge:{source:(e,t)=>t,target:()=>(a.list(),""),navigationRules:["exit"]}}]});console.log("listStructure",b),c(b,"list",300,"dimensionLevel",b.dimensions[Object.keys(b.dimensions)[0]].nodeId,["exit"],["any-exit"]);let _={nodes:{_0_cat0_meow0:{id:"_0_cat0_meow0",edges:["_0_cat0_meow0-_1_cat1_quack0","any-exit"],renderId:"_0_cat0_meow0",data:{cat:"meow",num:3,catKey:"_0_cat0_meow0"},existingElement:{useForSpatialProperties:!0},semantics:{label:"cat: meow. num: 3. catKey: _0_cat0_meow0. Data point."}},_1_cat1_quack0:{id:"_1_cat1_quack0",edges:["_0_cat0_meow0-_1_cat1_quack0","_1_cat1_quack0-_2_cat2_moo0","any-exit"],renderId:"_1_cat1_quack0",data:{cat:"quack",num:1,catKey:"_1_cat1_quack0"},existingElement:{useForSpatialProperties:!0},semantics:{label:"cat: quack. num: 1. catKey: _1_cat1_quack0. Data point."}},_2_cat2_moo0:{id:"_2_cat2_moo0",edges:["_1_cat1_quack0-_2_cat2_moo0","_2_cat2_moo0-_3_cat3_bork0","any-exit"],renderId:"_2_cat2_moo0",data:{cat:"moo",num:2,catKey:"_2_cat2_moo0"},existingElement:{useForSpatialProperties:!0},semantics:{label:"cat: moo. num: 2. catKey: _2_cat2_moo0. Data point."}},_3_cat3_bork0:{id:"_3_cat3_bork0",edges:["_2_cat2_moo0-_3_cat3_bork0","any-exit"],renderId:"_3_cat3_bork0",data:{cat:"bork",num:4,catKey:"_3_cat3_bork0"},existingElement:{useForSpatialProperties:!0},semantics:{label:"cat: bork. num: 4. catKey: _3_cat3_bork0. Data point."}}},edges:{"_0_cat0_meow0-_1_cat1_quack0":{source:"_0_cat0_meow0",target:"_1_cat1_quack0",navigationRules:["left","right"]},"_1_cat1_quack0-_2_cat2_moo0":{source:"_1_cat1_quack0",target:"_2_cat2_moo0",navigationRules:["left","right"]},"_2_cat2_moo0-_3_cat3_bork0":{source:"_2_cat2_moo0",target:"_3_cat3_bork0",navigationRules:["left","right"]},"any-exit":{source:(e,t)=>t,target:()=>(a.shortlist(),""),navigationRules:["exit"]}},navigationRules:{left:{key:"ArrowLeft",direction:"source"},right:{key:"ArrowRight",direction:"target"},exit:{key:"Escape",direction:"target"}}};console.log("shortlistStructure",_),c(_,"shortlist",300,"dimensionLevel",_.nodes[Object.keys(_.nodes)[0]].id,["exit"],["any-exit"])})();